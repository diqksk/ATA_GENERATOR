<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="container">
      <div class="quiz-box">
        <form id="form">
          <div><h1></h1></div>
          <div>
            <input type="text" placeholder="정답을 입력해 주세요" id="input" />
          </div>
          <div>
            <button class="submit">Submit</button>
            <button class="answer" type="button">Answer</button>
          </div>
        </form>
      </div>
    </div>
    <script>
      const $form = document.getElementById("form");
      const $input = document.getElementById("input");
      const $h1 = document.getElementsByTagName("h1")[0];
      const $answerBtn = document.querySelector(".answer");
      let answer = "";
      let title = "";

      const startGame = (keys) => {
        pickQuestion(keys);
        $input.value = "";
        $answerBtn.innerHTML = "Answer";
        $input.focus();
      };

      $form.addEventListener("submit", (e) => {
        e.preventDefault();

        if ($input.value !== answer) vibration();
        else startGame(keys);

        $input.value = "";
        $input.focus();
      });

      $answerBtn.addEventListener("click", (e) => {
        e.preventDefault();

        if (e.target.innerHTML === "Next") {
          e.target.innerHTML = "Answer";
          startGame(keys);
        } else {
          $input.value = answer;
          e.target.innerHTML = "Next";
        }
      });

      const pickQuestion = () => {
        const randomKey = keys[Math.floor(Math.random() * keys.length)];

        if (isTitle()) {
          $h1.innerHTML = randomKey;
          title = randomKey;
          answer = codes[randomKey];
        } else {
          $h1.innerHTML = codes[randomKey];
          title = codes[randomKey];
          answer = randomKey;
        }
      };

      const isTitle = () => Math.random() >= 0.5;

      const vibration = () => {
        const target = document.querySelector(".quiz-box");
        target.classList.add("vibration");

        setTimeout(() => {
          target.classList.remove("vibration");
        }, 400);
      };

      const codes = {
        서울: "ICN",
        서울: "SEL",
        서울: "GMP",
        제주: "CJU",
        부산: "PUS",
        울산: "USN",
        여수: "RSU",
        광주: "KWJ",
        청주: "CJJ",
        진주: "HIN",
        대구: "TAE",
        군산: "KUV",
        원주: "WJU",
        포항경주: "KPO",
        도쿄: "TYO",
        도쿄: "HND",
        도쿄: "NRT",
        오사카: "OSA",
        오사카: "KIX",
        나고야: "NGO",
        후쿠오카: "FUK",
        가고시마: "KOJ",
        니가타: "KIJ",
        오카야마: "OKJ",
        삿포로: "SPK",
        삿포로: "CTS",
        아오모리: "AOJ",
        오이타: "OIT",
        오키나와: "OKA",
        기타큐슈: "KKJ",
        베이징: "BJS",
        베이징: "PEK",
        톈진: "TSN",
        칭다오: "TAO",
        상하이: "SHA",
        상하이: "PVG",
        상하이: "SHA",
        광저우: "CAN",
        샤먼: "XMN",
        선양: "SHE",
        우한: "WUH",
        쿤밍: "KMG",
        지난: "TNA",
        로스앤젤레스: "LAX",
        뉴욕: "NYC",
        뉴욕: "JFK",
        시카고: "CHI",
        시카고: "ORD",
        애틀랜타: "ATL",
        댈러스: "DFW",
        샌프란시스코: "SFO",
        시애틀: "SEA",
        워싱턴: "WAS",
        워싱턴: "IAD",
        호놀룰루: "HNL",
        라스베이거스: "LAS",
        보스턴: "BOS",
        밴쿠버: "YVR",
        토론토: "YTO",
        토론토: "YYZ",
        파리: "PAR",
        파리: "CDG",
        프랑크푸르트: "FRA",
        런던: "LON",
        런던: "LHR",
        취리히: "ZRH",
        암스테르담: "AMS",
        로마: "ROM",
        로마: "FCO",
        밀라노: "MIL",
        밀라노: "MXP",
        비엔나: "VIE",
        마드리드: "MAD",
        바르셀로나: "BCN",
        프라하: "PRG",
        이스탄불: "IST",
        텔아비브: "TLV",
        자그레브: "ZAG",
        부다페스트: "BUD",
        방콕: "BKK",
        푸껫: "HKT",
        치앙마이: "CNX",
        싱가포르: "SIN",
        마닐라: "MNL",
        세부: "CEB",
        자카르타: "JKT",
        자카르타: "CGK",
        쿠알라룸푸르: "KUL",
        뭄바이: "BOM",
        델리: "DEL",
        호찌민: "SGN",
        하노이: "HAN",
        다낭: "DAD",
        카트만두: "KTM",
        양곤: "RGN",
        프놈펜: "PNH",
        콜롬보: "CMB",
        괌: "GUM",
        모스크바: "MOW",
        모스크바: "SVO",
        상트페테르부르크: "LED",
        블라디보스토크: "VVO",
        이르쿠츠크: "IKT",
        타슈켄트: "TAS",
        두바이: "DXB",
        고마쓰: "KMQ",
        가나자와: "KMQ",
        덴파사르: "DPS",
        발리: "DPS",
        몰디브: "MLE",
        말레: "MLE",
        팔라우: "ROR",
        코로르: "ROR",
        나트랑: "CXR",
        냐짱: "CXR",
      };

      const keys = Object.keys(codes);

      startGame(keys);
    </script>
  </body>
</html>
